{"name":"Openshift-diy-mojolicious","tagline":"Run Mojolicious in Openshift DIY cartrige","body":"openshift-diy-mojolicious\r\n====================\r\n\r\nSteps to support Perl 5.16 or newer version on OpenShift.com\r\n\r\n\r\nSteps:\r\n--------\r\n\r\nCreate new app using diy-0.1 cartridge:\r\n\r\n\trhc app create diy diy-0.1\r\n\trhc ssh -a diy\r\n\r\n\r\nDownload & Build new version of Perl from source:\r\n\r\n\tcd $OPENSHIFT_DATA_DIR\r\n\tmkdir download\r\n\tcd download\r\n\twget -c -nd http://www.cpan.org/src/5.0/perl-5.16.3.tar.gz\r\n\ttar -xf perl-5.16.3.tar.gz\r\n\tcd perl-5.16.3\r\n\t./Configure -des -Dprefix=\"$OPENSHIFT_DATA_DIR/perl\"\r\n\tmake \r\n\tmake install\r\n\tcd \"$OPENSHIFT_DATA_DIR/perl/bin\"\r\n\t./perl -v\r\n\r\nThen install additional Perl modules:\r\n\r\n\tcd \"$OPENSHIFT_DATA_DIR/perl/bin\"\r\n\tHOME=$OPENSHIFT_DATA_DIR ./perl cpan\r\n\t> cpan[1]    notest install Mojolicious and_other_modules\r\n\t> quit\r\n\r\n\r\nRoll your own webserver\r\n----------------------\r\n\r\nTo start your own web server run on host $OPENSHIFT_DIY_IP and on port $OPENSHIFT_DIY_PORT (usually port 8080)  :\r\n\r\n\t\r\n\t\"$OPENSHIFT_DATA_DIR/perl/bin/morbo\" --listen 'http://$OPENSHIFT_DIY_IP:$OPENSHIFT_DIY_PORT' \"$OPENSHIFT_REPO_DIR/diy/script/diy\"\r\n\r\n\r\nHowever, Please edit this file:\r\n\r\n\t.openshift/action_hooks/start\r\n\r\nto \r\n\r\n\t#!/bin/bash\r\n\tMOJO_HOME=\"$OPENSHIFT_REPO_DIR/diy\" \"$OPENSHIFT_DATA_DIR/perl/bin/morbo\" \\\r\n              --listen=\"http://$OPENSHIFT_DIY_IP:$OPENSHIFT_DIY_PORT\" \\\r\n              \"$OPENSHIFT_REPO_DIR/diy/script/diy\" |& /usr/bin/logshifter -tag diy &\r\n\r\nto autostart your webserver.\r\n\r\n\r\nand also:\r\n\r\n\t.openshift/action_hooks/stop\r\n\r\nto\r\n\r\n    #!/bin/bash\r\n    source $OPENSHIFT_CARTRIDGE_SDK_BASH\r\n    \r\n    # The logic to stop your application should be put in this script.\r\n    if [ -z \"$(ps -ef | grep diy | grep -v grep)\" ]\r\n    then\r\n        client_result \"Application is already stopped\"\r\n    else\r\n        kill `ps -ef | grep diy | grep -v grep | awk '{ print $2 }'` > /dev/null 2>&1\r\n    fi\r\n\r\n\r\nto stop your webserver.\r\n\r\nAlso replace in \"diy/script/diy\"\r\n    \r\n    this:\r\n        \"use lib 'lib';\"\r\n    \r\n    to:\r\n        use lib $ENV{OPENSHIFT_REPO_DIR} . '/diy/lib';\r\n\r\n\r\n\r\nTest on your browser:\r\n----------------------\r\n\r\n\thttp://[diy]-[yourdomain].rhcloud.com\r\n\r\n\r\n\r\nMaintenance\r\n------------\r\n\r\nTo stop/start/restart your app:\r\n\r\n\trhc ssh -a diy\r\n\t\r\n\trhc app stop -a diy\r\n\trhc app start -a diy\r\n\trhc app restart -a diy\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}